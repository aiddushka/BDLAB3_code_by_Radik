{% extends "base.html" %}

{% block title %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞{% endblock %}

{% block content %}
<div class="card form-container">
    <a href="/table/–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏" class="btn btn-dark">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º</a>

    <h1 class="text-center mb-20">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <p class="text-{{ category }} text-center">{{ message }}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <form method="post">
        <!-- üîê CSRF —Ç–æ–∫–µ–Ω -->
        <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}">

        <!-- –°–æ–∑–¥–∞–µ–º —Å–ª–æ–≤–∞—Ä—å –∏–∑ record_data –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ -->
        {% set employee_data = {} %}
        {% for col, val in record_data %}
            {% set _ = employee_data.update({col: val}) %}
        {% endfor %}

        <div class="form-group">
            <label class="form-label">–§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ *</label>
            <input type="text" class="form-control" name="fullname"
                   value="{{ employee_data.fullname if employee_data.fullname else '' }}"
                   placeholder="–í–≤–µ–¥–∏—Ç–µ –§–ò–û" required>
        </div>

        <div class="form-group">
            <label class="form-label">–î–æ–ª–∂–Ω–æ—Å—Ç—å *</label>
            <input type="text" class="form-control" name="position"
                   value="{{ employee_data.position if employee_data.position else '' }}"
                   placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–æ–ª–∂–Ω–æ—Å—Ç—å" required>
        </div>

        <div class="form-group">
            <label class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω</label>
            <input type="text" class="form-control" name="phone"
                   value="{{ employee_data.phone if employee_data.phone else '' }}"
                   placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω">
        </div>

        <div class="form-group">
            <label class="form-label">Email</label>
            <input type="email" class="form-control" name="email"
                   value="{{ employee_data.email if employee_data.email else '' }}"
                   placeholder="–í–≤–µ–¥–∏—Ç–µ email">
        </div>

        <div class="form-group">
            <label class="form-label">–û—Ç–¥–µ–ª *</label>
            <select class="form-control" name="department_id" required>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–¥–µ–ª</option>
                {% for department in departments %}
                <option value="{{ department[0] }}"
                        {% if department[0] == employee_data.department_id|int %}selected{% endif %}>
                    {{ department[1] }}
                </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label class="form-label">–î–∞—Ç–∞ –ø—Ä–∏–µ–º–∞</label>
            <input type="date" class="form-control" name="hiredate"
                   value="{{ employee_data.hiredate if employee_data.hiredate else '' }}">
        </div>

        <div class="form-group">
            <label class="form-label">–ó–∞—Ä–ø–ª–∞—Ç–∞ *</label>
            <input type="number" step="0.01" min="0" class="form-control" name="salary"
                   value="{{ employee_data.salary if employee_data.salary else '' }}"
                   placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞—Ä–ø–ª–∞—Ç—É" required>
        </div>

        <p class="text-muted">* –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è</p>

        <button type="submit" class="btn btn-success" style="width: 100%">
            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
        </button>
    </form>
</div>
{% endblock %}