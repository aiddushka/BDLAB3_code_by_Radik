{% extends "base.html" %}

{% block title %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞{% endblock %}

{% block content %}
<div class="card form-container">
    <a href="/table/–î–æ—Å—Ç—É–ø —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤" class="btn btn-dark">‚Üê –ù–∞–∑–∞–¥ –∫ –¥–æ—Å—Ç—É–ø–∞–º</a>

    <h1 class="text-center mb-20">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <p class="text-{{ category }} text-center">{{ message }}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <form method="post">
        <!-- üîê CSRF —Ç–æ–∫–µ–Ω -->
        <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}">

        {% for col, val in record_data %}
        <div class="form-group">
            <label class="form-label">
                {% if col == 'accessid' %}ID –¥–æ—Å—Ç—É–ø–∞
                {% elif col == 'employeeid' %}–°–æ—Ç—Ä—É–¥–Ω–∏–∫ *
                {% elif col == 'systemlogin' %}–°–∏—Å—Ç–µ–º–Ω—ã–π –ª–æ–≥–∏–Ω *
                {% elif col == 'isactive' %}–ê–∫—Ç–∏–≤–µ–Ω
                {% elif col == 'passwordcompliant' %}–ü–∞—Ä–æ–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª–∏—Ç–∏–∫–µ
                {% elif col == 'forcepasswordchange' %}–¢—Ä–µ–±–æ–≤–∞—Ç—å —Å–º–µ–Ω—É –ø–∞—Ä–æ–ª—è
                {% elif col == 'employee_name' %}–ò–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
                {% elif col == 'issuedate' %}–î–∞—Ç–∞ –≤—ã–¥–∞—á–∏
                {% elif col == 'access_status' %}–°—Ç–∞—Ç—É—Å –¥–æ—Å—Ç—É–ø–∞
                {% elif col == 'passwordchangeddate' %}–î–∞—Ç–∞ —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è
                {% elif col == 'password_compliance' %}–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–∞—Ä–æ–ª—è
                {% elif col == 'force_password_change' %}–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è
                {% else %}{{ col }}{% endif %}
            </label>

            {% if col == 'accessid' %}
            <input type="text" class="form-control" value="{{ val }}" readonly>

            {% elif col == 'employeeid' %}
            <select class="form-control" name="{{ col }}" required>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</option>
                {% for employee in employees %}
                <option value="{{ employee[0] }}"
                        {% if employee[0]|string == val|string %}selected{% endif %}>
                    {{ employee[1] }}
                </option>
                {% endfor %}
            </select>

            {% elif col == 'isactive' or col == 'passwordcompliant' or col == 'forcepasswordchange' %}
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="{{ col }}" value="true"
                       {% if val == True or val == 'true' or val == 't' %}checked{% endif %}>
                <label class="form-check-label">
                    {{ '–î–∞' if (val == True or val == 'true' or val == 't') else '–ù–µ—Ç' }}
                </label>
            </div>

            {% elif col == 'issuedate' or col == 'passwordchangeddate' %}
            <input type="text" class="form-control" value="{{ val }}" readonly>

            {% elif col == 'employee_name' or col == 'access_status' or col == 'password_compliance' or col == 'force_password_change' %}
            <input type="text" class="form-control" value="{{ val }}" readonly>

            {% else %}
            <input type="text" class="form-control" name="{{ col }}" value="{{ val }}" required>
            {% endif %}
        </div>
        {% endfor %}

        <p class="text-muted">* –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è</p>

        <button type="submit" class="btn btn-success" style="width: 100%">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
    </form>
</div>
{% endblock %}