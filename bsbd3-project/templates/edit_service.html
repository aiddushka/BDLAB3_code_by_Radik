{% extends "base.html" %}

{% block title %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Å–ª—É–≥—É{% endblock %}

{% block content %}
<div class="card form-container">
    <h1 class="text-center mb-20">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <p class="text-{{ category }} text-center">{{ message }}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <form method="post">
        <!-- üîê CSRF —Ç–æ–∫–µ–Ω -->
        <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}">

        <!-- –°–æ–∑–¥–∞–µ–º —Å–ª–æ–≤–∞—Ä—å –∏–∑ record_data –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ -->
        {% set service_data = {} %}
        {% for col, val in record_data %}
            {% set _ = service_data.update({col: val}) %}
        {% endfor %}

        <!-- ID —É—Å–ª—É–≥–∏ (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ) -->
        <div class="form-group">
            <label class="form-label">ID —É—Å–ª—É–≥–∏</label>
            <input type="text" class="form-control" name="serviceid"
                   value="{{ service_data.serviceid if service_data.serviceid else '' }}" readonly>
        </div>

        <!-- –ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ -->
        <div class="form-group">
            <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ *</label>
            <input type="text" class="form-control" name="servicename"
                   value="{{ service_data.servicename if service_data.servicename else '' }}"
                   placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏" maxlength="100" required>
        </div>

        <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
        <div class="form-group">
            <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
            <textarea class="form-control" name="description"
                      placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥–∏" rows="3" maxlength="500">{{ service_data.description if service_data.description else '' }}</textarea>
        </div>

        <!-- –¶–µ–Ω–∞ -->
        <div class="form-group">
            <label class="form-label">–¶–µ–Ω–∞ (—Ä—É–±.) *</label>
            <input type="number" step="0.01" min="0" class="form-control" name="price"
                   value="{{ service_data.price if service_data.price else '' }}"
                   placeholder="–í–≤–µ–¥–∏—Ç–µ —Ü–µ–Ω—É" required>
        </div>

        <!-- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å -->
        <div class="form-group">
            <label class="form-label">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω—É—Ç) *</label>
            <input type="number" min="1" class="form-control" name="durationminutes"
                   value="{{ service_data.durationminutes if service_data.durationminutes else '' }}"
                   placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å" required>
        </div>

        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏—è -->
        <div class="form-group">
            <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è *</label>
            <select class="form-control" name="categoryid" required>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                {% for category in categories %}
                {% if category[0] is defined and category[0] != 'categoryid' %}
                <option value="{{ category[0] }}"
                        {% if category[0] == service_data.categoryid|int %}selected{% endif %}>
                    {{ category[1] if category[1] is defined else '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è' }}
                </option>
                {% endif %}
                {% endfor %}
            </select>
        </div>

        <button type="submit" class="btn btn-success" style="width: 100%">
            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
        </button>
    </form>

    <div class="text-center mt-20">
        <a href="/table/–£—Å–ª—É–≥–∏" class="btn btn-dark">‚Üê –ù–∞–∑–∞–¥ –∫ —É—Å–ª—É–≥–∞–º</a>
    </div>
</div>
{% endblock %}